<html>
	<body>
		<h1>Immediate Mode GUI in Javascript - Day 1</h1>
		<canvas id="canvas" width="640" height="480" style="border: 1px solid black;" />
		<script>
			function drawButton(ctx, x, y, w, h, label, pressed) {
				ctx.fillStyle = '#eee';
				ctx.fillRect(x, y, w, h);

				ctx.strokeStyle = 'black';
				ctx.strokeRect(x, y, w, h);

				ctx.fillStyle = 'black';
				ctx.font = '12px serif';
				ctx.textAlign = 'center';
				var offset = pressed ? 5 : 0;
				var px = x + w/2;
				var py = y + h/2;
				ctx.fillText(label, px + offset, py + offset);
			}
		
			function main(uiCtx) { 
				var ctx = uiCtx.ctx;
				ctx.fillStyle = 'white';
				ctx.fillRect(0, 0, 640, 480);
				drawButton(ctx, 10, 10, 200, 100, "Click me", false);
			}
		</script>
		<script>
			var canvas = document.getElementById("canvas");

			var uiContext = {
				mx: undefined,
				my: undefined,
				mb: undefined,
				ctx: canvas.getContext("2d")
			};

			canvas.onmousemove = function(ev) {
				uiContext.mx = ev.clientX;
				uiContext.my = ev.clientY;
				main(uiContext);
			};
			canvas.onmousedown = function(ev) {
				uiContext.mx = ev.clientX;
				uiContext.my = ev.clientY;
				switch (ev.button) {
					// left
					case 0: 
						uiContext.mb = 1;
						break;
					// middle
					case 1:
						uiContext.mb = 2;
						break;
					// right
					case 2:
						uiContext.mb = 4;
						break;
				}
				main(uiContext);
			};
		</script>
	</body>
</html>
